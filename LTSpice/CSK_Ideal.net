* D:\Users\Dan\Documents\GitHub\ThesisWork\LTSpice\CSK_Ideal.asc
R1 -Y N006 {R} tol=1
R3 N010 N012 {R} tol=1
R4 N013 N012 {.1*R} tol=1
R5 -Y N012 {10*R} tol=1
R2 X N006 {R} tol=1
C1 N006 X {C}
C2 N012 -Y {C}
C3 N016 Z {C}
R6 N017 N016 {.1*R} tol=1
R7 Z N016 {3.74*R} tol=1
V1 +15v 0 15v
V2 -15v 0 -15v
XU1 X 0 0 Z -15v 0 N013 +15v AD633_JT
XU5 -Y 0 X 0 -15v 0 N017 +15v AD633_JT
XU2 N016 0 Z opamp Aol=100K GBW=10Meg
XU3 N012 0 -Y opamp Aol=100K GBW=10Meg
XU4 N006 0 X opamp Aol=100K GBW=10Meg
V3 M 0 PULSE(0 10 0 1u 1u .0003 .0006 10)
R15 -Yr N005 {R} tol=1
R16 N008 N009 {R} tol=1
R17 N011 N009 {.1*R} tol=1
R18 -Yr N009 {R} tol=1
R19 Xr N005 {R} tol=1
C4 N005 Xr {C}
C5 N009 -Yr {C}
C6 N014 Zr {C}
R20 N015 N014 {.1*R} tol=1
R21 Zr N014 {3.74*R} tol=1
XU9 X 0 0 Zr -15v 0 N011 +15v AD633_JT
XU10 -Yr 0 X 0 -15v 0 N015 +15v AD633_JT
XU11 N014 0 Zr opamp Aol=100K GBW=10Meg
XU12 N009 0 -Yr opamp Aol=100K GBW=10Meg
XU13 N005 0 Xr opamp Aol=100K GBW=10Meg
XU14 N001 N004 N002 opamp Aol=100K GBW=10Meg
R22 N001 X 10k
R23 N004 Xr 10k
R24 N002 N001 10k
R25 N004 0 10k
XU15 N003 0 MR opamp Aol=100K GBW=10Meg
R26 N003 N002 10k
R27 MR N003 100k
R28 M N007 9k
R29 N007 0 1k
XX1 +15v -15v 0 X M N010 betaswitch
XX2 +15v -15v 0 X 0 N008 betaswitch

* block symbol definitions
.subckt betaswitch Vcc Vss GND IN MSG OUT
XU1 N005 N003 MSG Vcc Vss 4066
XU2 N004 0 N005 opamp Aol=100K GBW=10Meg
XU4 N001 0 N002 opamp Aol=100K GBW=10Meg
R1 N001 N003 50k
R2 N001 IN 5k
R3 N004 IN 10k
R4 N005 N004 10k
R5 N002 N001 10k
XU3 N006 0 OUT opamp Aol=100K GBW=10Meg
R6 N006 N002 10k
R7 OUT N006 10k
.lib opamp.sub
.ends betaswitch

.tran 0 .005 0 .001 startup
* ( BASED ON A CIRCUIT BY PAUL HOROWITZ )
* LORENZ BUTTERFLY CIRCUIT
* WWW.CHAOTIC-CIRCUITS.COM
***********************************************************************************
**** SPICE MODELING OF AD633 by JIM THOMPSON, http://www.analog-innovations.com/ © 2014 ****
***********************************************************************************
***** Rudimentary Behavioral Model of Analog Devices AD633 Analog Multiplier ******
***** Noise, CMRR and Feed-Thru are not modeled
***********************************************************************************
*** Per Pin Name X1 X2 Y1 Y2 -VS Z  W +VS ***
***              |  |  |  |   |  |  |  |  ***
.SUBCKT AD633_JT 1  2  3  4   5  6  7  8 
G_GX1        1 5 VALUE { (1+TANH(22*(V(1,5)-2)))/2*V(ITEMP) }
G_GX2        2 5 VALUE { (1+TANH(22*(V(2,5)-2)))/2*V(ITEMP) }
G_GY1        3 5 VALUE { (1+TANH(22*(V(3,5)-2)))/2*V(ITEMP) }
G_GY2        4 5 VALUE { (1+TANH(22*(V(4,5)-2)))/2*V(ITEMP) }
G_GZ         6 5 VALUE { (1+TANH(22*(V(6,5)-2)))/2*V(ITEMP) }
RCON_TAG3    7 0 1G
E_E1         ITEMP 0 VALUE { 1nA*(489.9-2.0842*TEMP+4.3472m*TEMP*TEMP) }
G_G1         N_1 7 VALUE { 30mA*TANH(450*V(N_2, 7))*V(BOUNDS) }
C_C1         N_2 0  100pF 
G_GIQ        8 5 VALUE { (1+TANH(22*(V(8,5)-2)))/2*4mA }
R_RNOF2      7 5  1G 
C_COUT       7 5  5pF 
E_E3         BOUNDS 0 VALUE {
+  (1+TANH(25*(V(8,7)-2.2)))*(1+TANH(25*(V(7,5)-2.2)))/4 }
R_R1         WINT N_2  1.59155K 
E_E2         WINT 0 VALUE { V(1,2)*V(3,4)/10+V(6) }
.MODEL       D D
D_D1         N_3 N_4 D 
F_F1         N_3 8 VF_F1 1
VF_F1        8 N_1 0
D_D2         8 N_3 D 
R_RNOF1      8 7  1G 
F_F2         8 5 VF_F2 1
VF_F2        N_4 8 0
C_C2         6 5  4pF 
C_C3         4 5  4pF 
C_C4         3 5  4pF 
C_C5         2 5  4pF 
C_C6         1 5  4pF 
.ENDS   AD633_JT
***********************************************************************************
* AD633_JT\nPIN ASSIGNMENT\n \nPIN1     X1          PIN5     -Vs\nPIN2     X2          PIN6       Z\nPIN3     Y1          PIN7       W\nPIN4     Y2          PIN8     +Vs
.lib opamp.sub
.param C = .02n
.param R = 80k
.lib SwitchAna.lib
.backanno
.end
