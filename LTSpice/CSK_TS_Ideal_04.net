* D:\Users\Dan\Documents\GitHub\ThesisWork\LTSpice\CSK_TS_Ideal_04.asc
R1 -Y N001 {R} tol=1
R3 X N007 {.5*R} tol=1
R4 N011 N007 {.1*R} tol=1
R5 -Y N007 {sig*R} tol=1
R2 X N001 {R} tol=1
C1 N001 N002 {C}
C2 N007 N008 {C}
C3 N013 N014 {C}
R6 N017 N013 {.1*R} tol=1
R7 Z N013 {rho*R} tol=1
V1 +15v 0 15v
V2 -15v 0 -15v
XU1 X 0 0 Z -15v 0 N011 +15v AD633_JT
XU5 -Y 0 X 0 -15v 0 N017 +15v AD633_JT
XU2 N013 0 N014 opamp Aol=100K GBW=10Meg
XU3 N007 0 N008 opamp Aol=100K GBW=10Meg
XU4 N001 0 N002 opamp Aol=100K GBW=10Meg
V3 M 0 PULSE(0 10 0 1u 1u {T} {2*T} 10)
XX2 +15v -15v 0 M Z N002 X NC_01 tsblock
XX3 +15v -15v 0 M Z N014 Z NC_02 tsblock
XX1 +15v -15v 0 M Z N008 -Y NC_03 tsblock
R8 N005 N003 {R} tol=1
R9 X N009 {.5*R} tol=1
R10 N012 N009 {.1*R} tol=1
R11 N005 N009 {sig*R} tol=1
R12 Z1 N003 {R} tol=1
C4 N003 N004 {C}
C5 N009 N010 {C}
C6 N015 N016 {C}
R13 N018 N015 {.1*R} tol=1
R14 N006 N015 {rho*R} tol=1
XU6 X 0 0 N006 -15v 0 N012 +15v AD633_JT
XU7 N005 0 X 0 -15v 0 N018 +15v AD633_JT
XU8 N015 0 N016 opamp Aol=100K GBW=10Meg
XU9 N009 0 N010 opamp Aol=100K GBW=10Meg
XU10 N003 0 N004 opamp Aol=100K GBW=10Meg
XX4 +15v -15v 0 0 N006 N004 Z1 NC_04 tsblock
XX5 +15v -15v 0 0 N006 N016 N006 NC_05 tsblock
XX6 +15v -15v 0 0 N006 N010 N005 NC_06 tsblock

* block symbol definitions
.subckt tsblock Vcc Vss GND MSG X3 IN OUT TEST
XU1 0 0 X3 Vss P001 N009 N007 Vcc LT1011
R2 Vcc N007 20k
R1 N008 GND 10k
C1 N009 Vcc .003µ
R3 N007 P001 1000k
D1 N007 N008 1N4148
XU2 N005 N006 TEST Vcc Vss 4066
R4 TEST GND 10k
D2 GND N008 1N4148
XU7 N001 0 N002 opamp Aol=100K GBW=10Meg
XU9 N003 0 OUT opamp Aol=100K GBW=10Meg
R5 N003 N006 10k
R6 N003 N002 10k
R7 OUT N003 10k
R8 N001 IN 10k
R9 N002 N001 7.5k
XU8 N004 0 N005 opamp Aol=100K GBW=10Meg
R10 N004 IN 10k
R11 N005 N004 3k
C2 N006 GND 10p
A1 N008 MSG 0 0 0 TEST 0 0 XOR
.lib opamp.sub
.ends tsblock

.model D D
.lib C:\PROGRA~2\LTC\LTSPIC~1\lib\cmp\standard.dio
.tran 0 {10*T} 0 .00001 startup
* ( BASED ON A CIRCUIT BY PAUL HOROWITZ )
* LORENZ BUTTERFLY CIRCUIT
* WWW.CHAOTIC-CIRCUITS.COM
***********************************************************************************
**** SPICE MODELING OF AD633 by JIM THOMPSON, http://www.analog-innovations.com/ © 2014 ****
***********************************************************************************
***** Rudimentary Behavioral Model of Analog Devices AD633 Analog Multiplier ******
***** Noise, CMRR and Feed-Thru are not modeled
***********************************************************************************
*** Per Pin Name X1 X2 Y1 Y2 -VS Z  W +VS ***
***              |  |  |  |   |  |  |  |  ***
.SUBCKT AD633_JT 1  2  3  4   5  6  7  8 
G_GX1        1 5 VALUE { (1+TANH(22*(V(1,5)-2)))/2*V(ITEMP) }
G_GX2        2 5 VALUE { (1+TANH(22*(V(2,5)-2)))/2*V(ITEMP) }
G_GY1        3 5 VALUE { (1+TANH(22*(V(3,5)-2)))/2*V(ITEMP) }
G_GY2        4 5 VALUE { (1+TANH(22*(V(4,5)-2)))/2*V(ITEMP) }
G_GZ         6 5 VALUE { (1+TANH(22*(V(6,5)-2)))/2*V(ITEMP) }
RCON_TAG3    7 0 1G
E_E1         ITEMP 0 VALUE { 1nA*(489.9-2.0842*TEMP+4.3472m*TEMP*TEMP) }
G_G1         N_1 7 VALUE { 30mA*TANH(450*V(N_2, 7))*V(BOUNDS) }
C_C1         N_2 0  100pF 
G_GIQ        8 5 VALUE { (1+TANH(22*(V(8,5)-2)))/2*4mA }
R_RNOF2      7 5  1G 
C_COUT       7 5  5pF 
E_E3         BOUNDS 0 VALUE {
+  (1+TANH(25*(V(8,7)-2.2)))*(1+TANH(25*(V(7,5)-2.2)))/4 }
R_R1         WINT N_2  1.59155K 
E_E2         WINT 0 VALUE { V(1,2)*V(3,4)/10+V(6) }
.MODEL       D D
D_D1         N_3 N_4 D 
F_F1         N_3 8 VF_F1 1
VF_F1        8 N_1 0
D_D2         8 N_3 D 
R_RNOF1      8 7  1G 
F_F2         8 5 VF_F2 1
VF_F2        N_4 8 0
C_C2         6 5  4pF 
C_C3         4 5  4pF 
C_C4         3 5  4pF 
C_C5         2 5  4pF 
C_C6         1 5  4pF 
.ENDS   AD633_JT
***********************************************************************************
* AD633_JT\nPIN ASSIGNMENT\n \nPIN1     X1          PIN5     -Vs\nPIN2     X2          PIN6       Z\nPIN3     Y1          PIN7       W\nPIN4     Y2          PIN8     +Vs
.lib opamp.sub
.param C = .02n
.param R = 100k
.param sig = 10
.param rho = 3.74
.param T = 1m
.lib LTC1.lib
.lib SwitchAna.lib
.backanno
.end
